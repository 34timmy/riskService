<div *ngIf="showToggle && (listsLoaded | async)"
     [style.display]="'block'"
     [style.background-color]="'rgba(0,0,0,0.4)'"
     class="modal fade in" role="dialog" id="editRow">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button pButton type="button" style="color:#ff0d20" class="close" data-dismiss="modal" icon="fa fa-close"
                aria-hidden="true" (click)="closeModal()">
        </button>
        <h2 class="modal-title">Списки компаний</h2>
      </div>
      <div class="modal-body">
        <div *ngIf="calculationPerform" class="ui-g ui-fluid">
          <div class="ui-g-12 ui-md-4">
            <p class="fa fa-chevron-right" style="margin: 0 5px 0 0"></p>
            <p-dropdown class="" [options]="models" [(ngModel)]="selectedModel" [filter]="true"
                        placeholder="Модель" [showClear]="true"
                        [style]="{'width':'150px'}">
              <ng-template let-item pTemplate="selectedItem">
                <div>{{item.value}}</div>
              </ng-template>
            </p-dropdown>
          </div>

          <!--<div class="ui-g-12 ui-md-4 ">-->
            <!--<p class="fa fa-list-ol" style="margin: 0 5px 0 0"></p>-->
            <!--<p-dropdown [options]="stages" [(ngModel)]="selectedStage" [filter]="true"-->
                        <!--placeholder="Стадия" [showClear]="true"-->
                        <!--[style]="{'width':'150px'}">-->
              <!--<ng-template let-item pTemplate="selectedItem">-->
                <!--<div>{{item.label}}</div>-->
              <!--</ng-template>-->
            <!--</p-dropdown>-->
          <!--</div>-->
          <div class="ui-g-12 ui-md-4">
            <p class="fa fa-calendar " style="margin: 0 5px 0 0"></p>
            <p-dropdown [options]="years" [(ngModel)]="selectedYear" [filter]="true"
                        placeholder="Год" [showClear]="true"
                        [style]="{'width':'150px'}">
              <ng-template let-item pTemplate="selectedItem">
                <div>{{item.label}}</div>
              </ng-template>
            </p-dropdown>
          </div>
        </div>
        <p-treeTable [value]="companiesListNodes" [columns]="cols" selectionMode="single" [(selection)]="selectedNode"
        >
          <ng-template pTemplate="header" let-columns>
            <tr>
              <th *ngFor="let col of columns" [ttSortableColumn]="col.field">{{col.header}}
                <p-treeTableSortIcon [field]="col.field"></p-treeTableSortIcon>
              </th>
            </tr>
          </ng-template>
          <ng-template
            pTemplate="body" let-rowNode let-rowData="rowData"
            pDraggable="dd" (onDragEnd)="dragEnd($event,rowData)"
            (onDragStart)="dragStart($event,rowData)">
            <tr [ttSelectableRow]="rowNode">

              <td>
                <p-treeTableToggler [rowNode]="rowNode"></p-treeTableToggler>
                {{rowData.id}}
              </td>
              <td>
                {{rowData.descr || rowData.name }}
              </td>
              <td>
                <p-button type="button" icon="fa fa-edit" style="margin: 5px 5px 5px 5px" styleClass="ui-button-success"
                          (click)="onEdit(rowData)"></p-button>
                <p-button icon="fa fa-trash" style="margin: 5px 5px 5px 5px" styleClass="ui-button-danger "
                          (click)="onDelete(rowData)"></p-button>
              </td>
            </tr>
          </ng-template>
          <app-company-save #saveChild></app-company-save>
        </p-treeTable>
        <footer *ngIf="calculationPerform">
          <button type="button" pButton icon="fa fa-calculator" style="float:right"
                  (click)="calculate()" label="Рассчитать">
          </button>
        </footer>
      </div>
    </div>
  </div>
</div>
